
<!DOCTYPE html>
<html>
<head>
	<title></title>
<style type="text/css">
*{box-sizing: border-box;}
body{margin:0 auto;}
.canvas {background: white;
border: 1px solid grey;
display: none;
}
.wrap {
	width:900px;
	height:1300px;
	margin:0 auto;
	margin-top:50px;
}
.main {
	background: grey;
	width:100%;
	height:100%;
	display: flex;
	flex-direction:column;
	align-items: center;
	justify-content: center;
}
.main .title {
	width:95%;
	height:400px;
	background: black;
	position: relative; top:-200px;
}
.main .start_game {
	width:500px;
	height:100px;
	font-size: 30px;
	text-align: center;
	border: 2px solid black;
	display: flex;
	justify-content:center;
	align-items: center;
	margin-bottom: 100px;
}
.main .game_load {
	width:500px;
	height:100px;
	font-size: 30px;
	text-align: center;
	border: 2px solid black;
	display: flex;
	justify-content:center;
	align-items: center;
}

.wrap .menu_btn {
	width:100px;
	height:100px;
	background: black;
	display: none;
	position: absolute; top : 100px; left : 800px;
}

.wrap .menu {
	width:900px;
	height:600px;
	background: grey;
	margin:0 auto;
	position: absolute; top: 50px;
	display: none;
	transition: all 1s;
	flex-flow: column wrap;
  justify-content: center;
  align-items: center;
}
.wrap .menu .menu_close {
	width:100px;
	height: 100px;
	background: black;
	position: absolute; top : 630px; left : 760px;
}
.wrap .menu .box1 {
	width:100px; height:100px;
	border: 2px solid black;
	margin: 30px;}
</style>
</head>
<body>
<div class = "wrap">

<div class="menu_btn"></div>

<div class="menu">
	<div class="box1"></div>
	<div class="box1"></div>
	<div class="box1"></div>
	<div class="box1"></div>
	<div class="box1"></div>
	<div class="box1"></div>
	<div class="box1"></div>
	<div class="box1"></div>
	<div class="box1" id = "main_move"></div>
	<div class="menu_close"></div>
</div>
<div class="main">
	<div class="title">
		
	</div>
	<div class="start_game">
		처음시작
	</div>
	<div class="game_load">
		이어하기
	</div>
</div>
<canvas class="canvas" width="900" height="1300"></canvas>
</div>

<script type="text/javascript">
const canvas = document.querySelector(".canvas");
const ctx = canvas.getContext("2d");

let save_date = localStorage.getItem("date");

const start_btn = document.querySelector(".start_game");
const load_btn = document.querySelector(".game_load");
const main_page = document.querySelector(".main");
const menu = document.querySelector(".menu");
const menu_btn = document.querySelector(".menu_btn");
const menu_close = document.querySelector(".menu_close");
const menu_move = document.querySelector("#main_move");

start_btn.addEventListener("touchstart",function(){
	main_page.style.display="none";
	canvas.style.display="block";
	menu_btn.style.display="block";
	// menu_bar.style.display="flex";
});
load_btn.addEventListener("touchstart",function(){
	if(save_date === null){
		alert("저장된 데이터가 없습니다.");
	}
	// else{
	// 	let gold_inner = localStorage.getItem("date");
	// 	gold_icon.innerHTML = gold_inner + " GOLD";
	// 	main_page.style.display="none";
	// 	menu_bar.style.display="flex";
	// 	gold = Number(gold_inner);
	// }
});

menu_btn.addEventListener("touchstart",function(){
	menu_btn.style.display="none";
	menu.style.display="flex";
});

menu_close.addEventListener("touchstart",function(){
	menu.style.display="none";
	menu_btn.style.display="block";
});
// const save_btn = document.querySelector("#save");
// save_btn.addEventListener("click",function(){
// 	localStorage.setItem("date",Number(gold));
// });

main_move.addEventListener("touchstart",function(){
	canvas.style.display="none";
	main_page.style.display="flex";
	menu_btn.style.display="none";
	menu.style.display="none";
});

// 터치이벤트
let startX; //터치감지
let move_detect = false; // 터치중에 이동하기 위한 감지기

canvas.addEventListener("touchstart",touch_H); //터치 시작 이벤트
canvas.addEventListener("touchend",touch_end_H); //터치 끝 이벤트
function touch_H(event){ 				//터치 함수
	event.preventDefault();
	startX = event.touches[0].pageX;
	if(startX <= canvas.width/2){ 	//좌측화면 터치시 왼쪽보기
		player_look=false;
		move_detect = true;
		}
		else{
			player_look=true; // 우측화면 터치시 우측보기
			move_detect = true;
	}		
}

function touch_end_H(){
	move_detect = false; //터치가 끝나는걸 감지
}
function player_move(){
	if(move_detect&&player_look&&p_x<=canvas.width-55){
		p_x += player_speed; //오른쪽 이동
	}
	else if(move_detect&&player_look===false&&p_x>=5){
		p_x -= player_speed; // 왼쪽 이동
	}
}
// 터치이벤트 //


// 플레이어 
let player_look = true;
let p_x = canvas.width/2-45;
let p_y = canvas.height-100;
let p_w = 50;
let p_h = 100;
let player_speed = 3; // 이동속도

const player_1_f = new Image();
player_1_f.src = "player_1_f.png";

const player_1_r = new Image();
player_1_r.src = "player_1_r.png";

function player_draw(){
	if(player_look){
		ctx.beginPath(); // 오른쪽 바라보기
		ctx.drawImage(player_1_f,p_x,p_y,p_w,p_h);
		ctx.closePath();		
	}
	else {
		ctx.beginPath(); //왼쪽 바라보기
		ctx.drawImage(player_1_r,p_x,p_y,p_w,p_h);
		ctx.closePath();		
	}
}
// 플레이어 //





// 캔버스 드로우 함수
function draw(){
	ctx.clearRect(0,0,canvas.width,canvas.height);
	player_draw();
	player_move();
}
setInterval(draw,10);
// 캔버스 드로우 함수 //


//
</script>

</body>
</html>